<div class="modal-header text-center">
    <h5>{{tittle}}</h5>
    <div class="close-modal">
        <i class="fa fa-close" style="cursor: pointer;" (click)="cancel()"></i>
    </div>
</div>
<div class="modal-body">
    <form [formGroup]="simForm">
        <div class="_card white-bg">
            <div class="row">
                <div class="col-md-6 mb-2">
                    <label class="form-label">Iccid</label>
                    <div class="input-group mb-2">
                        <input type="text" class="form-control" placeholder="Enter Iccid" formControlName="iccid"
                            aria-describedby="button-addon2" readonly maxlength="20" />
                    </div>
                    @if (simForm.get('iccid')?.hasError('required') && simForm.get('iccid')?.touched) {
                    <span class="text-danger">ICCID is required</span>
                    }
                </div>

                <div class="col-md-6 mb-2">
                    <label class="form-label">Activation Date</label>
                    <div class="input-group mb-2">
                        <input type="date" class="form-control" placeholder="Enter Activation Date"
                            formControlName="activationDate" aria-describedby="button-addon2" bsDatepicker />
                    </div>
                    @if (simForm.get('activationDate')?.invalid &&
                    (simForm.get('activationDate')?.dirty || simForm.get('activationDate')?.touched))
                    {
                    <span class="text-danger">Activation Date is Required</span>
                    }
                </div>

                <div class="col-md-6 mb-2">
                    <label class="form-label">Valid Till</label>
                    <div class="input-group mb-2">
                        <input type="date" class="form-control" placeholder="Enter Valid Till"
                            formControlName="validTill" aria-describedby="button-addon2" bsDatepicker />
                    </div>
                    @if (simForm.get('validTill')?.invalid &&
                    (simForm.get('validTill')?.dirty || simForm.get('validTill')?.touched))
                    {
                    <span class="text-danger">Valid Till is Required</span>
                    }
                </div>

                <div class="col-md-6 mb-2">
                    <label class="form-label">Primary Imsi</label>
                    <div class="input-group mb-2">
                        <input type="text" class="form-control" placeholder="Enter Primary Imsi"
                         (keypress)="($event.key.match('[0-9]') ? true : $event.preventDefault())" 
                            formControlName="primaryImsi" aria-describedby="button-addon2" maxlength="15" />
                    </div>
                    @if (simForm.get('primaryImsi')?.hasError('required') && simForm.get('primaryImsi')?.touched) {
                    <span class="text-danger">Primary Imsi is Required</span>
                    }
                    @if (simForm.get('primaryImsi')?.hasError('pattern')) {
                    <span class="text-danger">Primary Imsi cannot be more than 15 digits</span>
                    }
                </div>

                <div class="col-md-6 mb-2">
                    <label class="form-label">Primary Msidn</label>
                    <div class="input-group mb-2">
                        <input type="text" class="form-control" placeholder="Enter Primary Msidn"
                        (keypress)="($event.key.match('[0-9]') ? true : $event.preventDefault())" 
                            formControlName="primaryMsidn" aria-describedby="button-addon2" maxlength="15" />
                    </div>
                    <div *ngIf="simForm.get('primaryMsidn')?.touched && simForm.get('primaryMsidn')?.invalid">
                        <span class="text-danger" *ngIf="simForm.get('primaryMsidn')?.errors?.['required']">Primary MSISDN is
                            required.</span>
                        <span class="text-danger" *ngIf="simForm.get('primaryMsidn')?.errors?.['pattern']">
                            MSISDN must be 10–15 digits, may start with + (E.164 format).
                        </span>
                    </div>
                </div>

                <div class="col-md-6 mb-2">
                    <label class="form-label">Secondary Imsi</label>
                    <div class="input-group mb-2">
                        <input type="text" class="form-control" placeholder="Enter Secondary Imsi"
                        (keypress)="($event.key.match('[0-9]') ? true : $event.preventDefault())" 
                            formControlName="secondryImsi" aria-describedby="button-addon2" maxlength="15"/>
                    </div>
                    @if (simForm.get('secondryImsi')?.hasError('required') && simForm.get('secondryImsi')?.touched) {
                    <span class="text-danger">Secondary Imsi is Required</span>
                    }
                    @if (simForm.get('secondryImsi')?.hasError('pattern')) {
                    <span class="text-danger">Secondary Imsi cannot be more than 15 digits</span>
                    }
                </div>

                <div class="col-md-6 mb-2">
                    <label class="form-label">Secondary Msidn</label>
                    <div class="input-group mb-2">
                        <input type="text" class="form-control" placeholder="Enter Secondary Msidn"
                        (keypress)="($event.key.match('[0-9]') ? true : $event.preventDefault())" 
                            formControlName="secondryMsidn" aria-describedby="button-addon2" maxlength="15" />
                    </div>

                    <div *ngIf="simForm.get('secondryMsidn')?.touched && simForm.get('secondryMsidn')?.invalid">
                        <span class="text-danger" *ngIf="simForm.get('secondryMsidn')?.errors?.['required']">Secondary
                            MSISDN is required.</span>
                        <span class="text-danger" *ngIf="simForm.get('secondryMsidn')?.errors?.['pattern']">
                            MSISDN must be 10–15 digits, may start with + (E.164 format).
                        </span>
                    </div>
                </div>


            </div>
        </div>
        <div class="footer mt-3">
            <div class="button-container">
                <button class="btn btn-success" type="submit" (click)="submit(simForm?.value)">Submit</button>
                <button class="btn btn-danger" type="button" (click)="cancel()">Cancel</button>
            </div>
        </div>
    </form>
</div>